generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PSQL_CONNECTION_STRING")
}

model admin_user_tokens {
  id         Int                      @id @default(autoincrement())
  user       BigInt                   @unique @default(dbgenerated("(floor(((random() * ('9000000000'::bigint)::double precision) + (1000000000)::double precision)))::bigint"))
  password   String                   @default(dbgenerated("encode(gen_random_bytes(16), 'base64'::text)"))
  status     admin_user_tokens_status @default(active)
  created_at DateTime?                @default(now()) @db.Timestamp(6)
  employees  employees[]
  sessions   sessions?
}

model employees {
  id                Int                @id @default(autoincrement())
  name              String
  created_by        Int?
  created_at        DateTime?          @default(now()) @db.Timestamp(6)
  admin_user_tokens admin_user_tokens? @relation(fields: [created_by], references: [id], onUpdate: NoAction)
}

model sessions {
  id                   Int                @id @default(autoincrement())
  admin_user_tokens_id Int?               @unique
  chat_id              BigInt             @unique
  user_metadata        Json?
  created_at           DateTime?          @default(now()) @db.Timestamp(6)
  admin_user_tokens    admin_user_tokens? @relation(fields: [admin_user_tokens_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

enum admin_user_tokens_status {
  active
  used
  disabled
}
